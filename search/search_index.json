{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"1_visao_geral/","title":"Vis\u00e3o Geral","text":"<p>Este projeto tem o objetivo de realizar um processo de ETL, no qual ir\u00e1 extrair de dados a partir de arquivos Excel, transform\u00e1-los de acordo com regras de neg\u00f3cio e, por fim, carreg\u00e1-los no Google BigQuery.</p> <p>O pipeline executa as seguintes etapas:</p> <ol> <li>Leitura de arquivos Excel;</li> <li>Extra\u00e7\u00e3o de metadados (data da avalia\u00e7\u00e3o e revisor);</li> <li>Transforma\u00e7\u00e3o dos dados:</li> <li>Unpivot dos dados;</li> <li>C\u00e1lculo de pesos percentuais;</li> <li>Valida\u00e7\u00e3o de schema;</li> <li>Carga no Google BigQuery.</li> </ol>"},{"location":"1_visao_geral/#fluxo-do-processo","title":"Fluxo do Processo","text":"<pre><code>flowchart TD\n    A[In\u00edcio] --&gt; B[Ler Arquivo Excel]\n    B --&gt; C[Extrair Metadados e Dados]\n    C --&gt; D[Tratar Dados]\n    D --&gt; E[Validar Dados com Pandera]\n    E --&gt; F{Valida\u00e7\u00e3o Ok?}\n    F -- Sim --&gt; G[Carregar no BigQuery]\n    F -- N\u00e3o --&gt; H[Encerrar com Erro]\n    G --&gt; I[Fim]\n    H --&gt; I\n</code></pre>"},{"location":"1_visao_geral/#documentacao-das-funcoes","title":"Documenta\u00e7\u00e3o das Fun\u00e7\u00f5es","text":""},{"location":"1_visao_geral/#capturar_erros","title":"<code>capturar_erros</code>","text":"<p>Descri\u00e7\u00e3o: Decorador utilizado para capturar erros durante a execu\u00e7\u00e3o das fun\u00e7\u00f5es do pipeline. Se houver qualquer erro, ele ser\u00e1 registrado num log e o processo ser\u00e1 encerrado.</p> <p>Par\u00e2metros: - <code>funcao</code> (function): fun\u00e7\u00e3o que ser\u00e1 monitorada.</p> <p>Retorno: - Retorna a fun\u00e7\u00e3o original encapsulada com o tratamento de erros.</p>"},{"location":"1_visao_geral/#ler_arquivo","title":"<code>ler_arquivo</code>","text":"<p>Descri\u00e7\u00e3o: L\u00ea um arquivo Excel e extrai tanto os dados tabulares quanto os metadados (Data da Avalia\u00e7\u00e3o e Revisor).</p> <p>Par\u00e2metros: - <code>caminho</code> (str): Caminho do arquivo Excel. - <code>aba</code> (str): Nome da aba do Excel a ser lida. - <code>coluna_dados</code> (str): Nome do cabe\u00e7alho que identifica o in\u00edcio dos dados tabulares.</p> <p>Retorno: - (dict) Dicion\u00e1rio contendo:   - <code>DATA_AVALIACAO</code> (datetime.date): Data da avalia\u00e7\u00e3o;   - <code>REVISOR</code> (str): Nome do revisor;   - <code>DADOS</code> (pd.DataFrame): Dados da tabela;   - <code>CAMINHO</code> (str): Caminho do arquivo.</p>"},{"location":"1_visao_geral/#tratar_dataframe","title":"<code>tratar_dataframe</code>","text":"<p>Descri\u00e7\u00e3o: Realiza o tratamento dos dados por meio das a\u00e7\u00f5es de:</p> <ul> <li>Gera\u00e7\u00e3o dos pesos percentuais de cada agente;</li> <li>Unpivot dos dados de avalia\u00e7\u00e3o;</li> <li>Merge dos dados de avalia\u00e7\u00e3o com os pesos percentuais;</li> <li>Inclus\u00e3o dos metadados (data da avalia\u00e7\u00e3o e revisor);</li> <li>Valida\u00e7\u00e3o conforme o schema definido;</li> <li>Gera\u00e7\u00e3o do nome da tabela de destino.</li> </ul> <p>Par\u00e2metros: - <code>conteudo</code> (dict): Dicion\u00e1rio retornado pela fun\u00e7\u00e3o <code>ler_arquivo</code>. - <code>colunas_base</code> (list): Lista de colunas fixas no unpivot. - <code>colunas_valores</code> (list): Lista de colunas a serem transformadas em linhas no unpivot. - <code>nome_tabela</code> (dict): Dicion\u00e1rio de mapeamento entre o caminho do arquivo e o nome base da tabela no BigQuery.</p> <p>Retorno: - (tuple) com:   - <code>nome_arquivo</code> (str): Nome da tabela no BigQuery (incluindo a data no sufixo).   - <code>df_tabela_dados</code> (pd.DataFrame): DataFrame tratado e validado.</p>"},{"location":"1_visao_geral/#carregar_dados_bigquery","title":"<code>carregar_dados_bigquery</code>","text":"<p>Descri\u00e7\u00e3o: Carrega um DataFrame para uma tabela no Google BigQuery, sobrescrevendo-a caso j\u00e1 exista.</p> <p>Par\u00e2metros: - <code>dataframe</code> (pd.DataFrame): Dataframe contendo dados tratados e validados. - <code>nome_tabela</code> (str): Nome da tabela de destino no BigQuery.</p> <p>Retorno: - (None) Obs.: Ap\u00f3s a carga de dados h\u00e1 um log, indicando o n\u00famero de linhas carregadas.</p>"},{"location":"2_airflow/","title":"Orquestra\u00e7\u00e3o","text":"<p>A orquestra\u00e7\u00e3o do pipeline \u00e9 realizada utilizando o Apache Airflow, com duas DAGs principais:</p> <ul> <li>Processamento da Classifica\u00e7\u00e3o de Cr\u00e9dito de Clientes;</li> <li>Processamento da Avalia\u00e7\u00e3o de Fornecedores.</li> </ul>"},{"location":"2_airflow/#estrutura-das-dags","title":"Estrutura das DAGs","text":""},{"location":"2_airflow/#variaveis","title":"Vari\u00e1veis","text":"<ul> <li>Caminhos dos arquivos: definidos via vari\u00e1veis de ambiente no arquivo <code>.env</code>.</li> <li>Nomes das tabelas: constru\u00eddos dinamicamente com base no nome dos arquivos e nas datas de avalia\u00e7\u00e3o.</li> <li>Colunas bases e colunas de valores: definem quais colunas permanecem fixas e quais s\u00e3o utilizadas no unpivot dos dados.</li> </ul>"},{"location":"2_airflow/#dag-processar_arquivo_classifi_credito","title":"DAG: <code>processar_arquivo_classifi_credito</code>","text":""},{"location":"2_airflow/#descricao","title":"Descri\u00e7\u00e3o","text":"<p>Realiza a extra\u00e7\u00e3o, transforma\u00e7\u00e3o e carga dos dados do arquivo Classifica\u00e7\u00e3o de Cr\u00e9dito.xlsx, pertencente ao setor financeiro.</p>"},{"location":"2_airflow/#schedule","title":"Schedule","text":"<p>Executa diariamente \u00e0s 07h (UTC-3) \u2192 <code>0 10 * * *</code></p>"},{"location":"2_airflow/#dag-processar_arquivo_avaliacao_forn","title":"DAG: <code>processar_arquivo_avaliacao_forn</code>","text":""},{"location":"2_airflow/#descricao_1","title":"Descri\u00e7\u00e3o","text":"<p>Executa o processamento dos dados do arquivo Avalia\u00e7\u00e3o de Fornecedores.xlsx, utilizado pelos setores de Suprimentos.</p>"},{"location":"2_airflow/#schedule_1","title":"Schedule","text":"<p>Executa diariamente \u00e0s 07h (UTC-3) \u2192 <code>0 10 * * *</code></p>"}]}